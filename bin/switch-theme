#!/usr/bin/env zsh

if [[ $# -ne 1 ]]; then
   print "one argument please" >&2
   exit 1
fi

if [ $1 = 'light' ]; then
  old='moon'
  new='dawn'
elif [ $1 = 'dark' ]; then
  old='dawn'
  new='moon'
else
  print "must be either light or dark" >&2
  exit 1
fi

# note to self: sed -i breaks hardlinks!
replace () { cp =(sed $1 $2) $2 }

replace "s/rose_pine_$old/rose_pine_$new/" ~/.config/helix/config.toml
replace "s/rose-pine-$old/rose-pine-$new/" ~/.config/alacritty/alacritty.yml
replace "s/$old/$new/" ~/.tmux.conf
for pid in `pgrep hx`; do kill -USR1 $pid; done
